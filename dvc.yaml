stages:
  prepare:
    cmd: python fashion_mnist/data/make_dataset.py
    deps:
      - fashion_mnist/data/make_dataset.py
    outs:
      - data/interim
      - data/raw
  visualize:
    cmd: python fashion_mnist/visualization/visualize.py
    deps:
      - fashion_mnist/visualization/visualize.py
      - data/interim
    plots:
      - reports/figures/:
          cache: false
  featurize:
    cmd: python fashion_mnist/features/build_features.py
    deps:
      - fashion_mnist/features/build_features.py
      - data/interim
    outs:
      - data/processed
  train:
    cmd: python fashion_mnist/models/train_model.py data/processed/ models/model.joblib models/metrics.json
    deps:
      - fashion_mnist/models/train_model.py
      - data/processed
    outs:
      - models/model.joblib
    params:
      - seed
      - train.val_split
      - train.max_depth
      - train.num_estimators
    metrics:
      - models/metrics.json:
          cache: false